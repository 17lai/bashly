summary 'Run json-schema checks on all examples'

action do
  Example.all.each do |example|
    file = example.yaml_path
    command = "check-jsonschema --schemafile schemas/bashly.json #{file}"
    success = system command
    color = success ? 'g' : 'r'
    say "- check-jsonschema #{color}`#{example.dir}`"
    exit 1 unless success
  end
end
