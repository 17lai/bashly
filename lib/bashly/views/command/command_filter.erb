# :command.command_filter
<%- if commands.any? -%>
action=$1

case $action in
-* )
  ;;

<%- commands.each do |command| -%>
<%= command.aliases.join " | " %> )
  action="<%= command.name %>"
  shift
  <%= command.name %>_parse_args "$@"
  shift $#
  ;;    

<%- end -%>
* )
  <%= name %>_usage
  exit 1
  ;;

esac
<%- else -%>
action=root
<%- end -%>
