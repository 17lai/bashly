# :command.parse_args_while
while [[ $# -gt 0 ]]; do
  key="$1"
  case "$key" in
  <%- flags.each do |flag| -%>
<%= flag.render(:case).indent 2 %>

  <%- end -%>

  -* )
    echo "<%= Settings.strings["invalid_flag"] % { flag: "$key" } %>"
    exit 1
    ;;

  * )
<%= render(:parse_args_case).indent 4 %>
    ;;

  esac
done