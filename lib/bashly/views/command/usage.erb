# :command.usage
<%= full_name.to_underscore %>_usage() {
  if [[ -n $long_usage ]]; then
    <%- if summary == help -%>
    echo -e "<%= caption_string %>"
    echo 
    <%- else -%>
    echo -e "<%= full_name %>"
    echo 
    echo -e "<%= help.wrap(78).indent(2).escape_newline %>"
    echo 
    <%- end -%>
  else
    echo -e "<%= caption_string %>"
    echo 
  fi
  echo -e "<%= strings[:usage] %>"
  echo -e "  <%= usage_string %>"
  echo
<%= render(:usage_commands).indent 2 if commands.any? %>

  if [[ -n $long_usage ]]; then
    echo -e "<%= strings[:options] %>"
<%= render(:usage_fixed_flags).indent 4 %>
<%= render(:usage_flags).indent 4 if flags.any? %>
<%= render(:usage_args).indent 4 if args.any? %>
<%= render(:usage_environment_variables).indent 4 if environment_variables %>
<%= render(:usage_examples).indent 4 if examples %>

  fi
}

<%- commands.each do |command| -%>
<%= command.render 'usage' %>
<%- end -%>
